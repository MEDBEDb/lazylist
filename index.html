<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html 
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <link rel="stylesheet" href="style.css" type="text/css" />
    <title>Lazylist implementation for Ruby</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  </head>
  <body>

    <ul id="linkbox">
      <li><a href="http://flori.github.com/lazylist/index.html">Homepage</a></li>
      <li><a href="http://github.com/flori/lazylist/tree/master">Github Repository</a></li>
      <li><a href="http://rubyforge.org/projects/lazylist">Rubyforge Project</a></li>
      <li><a href="http://rubyforge.org/frs/?group_id=394">Download</a></li>
      <li><a href="doc/index.html">Documentation</a></li>
      
    </ul>

    <div id="content">
      <h1>lazylist &ndash; Lazylist implementation for Ruby</h1>

<h2>Description</h2>
<p>
This class implements lazy lists (or streams) for Ruby. Such lists avoid the
computation of values which aren't needed for some computation. So it's
possible to define infinite lists with a limited amount of memory. A value
that hasn't been used yet is calculated on the fly and saved into the list.
A value which is used for a second time is computed only once and just read
out of memory for the second usage.
</p>
<p>
In the newest release I added the <i>list</i> method to Kernel, to shorten the
creation of lazy lists (especially the more complicated ones). It's possible to
create an infinite list of ones like that:
</p>
<pre>
ones = list(1) { ones } # => [... ]
ones.take 3             # => [1, 1, 1]
ones =                  # => [1,... ]
</pre>
<p>
To create the natural naturals, you can do this (or use LazyList.from(1)):
</p>
<pre>
def from(n = 1)
  list(n) { from(n + 1) }
end
naturals.take 3  # => [1, 2, 3]
naturals = from  # => [1, 2, 3,... ]
</pre>
Or shorter:
<pre>
naturals = LazyList[1..Infinity]
</pre>
<p>
To combine the lists, use <b>zip</b>:
</p>
<pre>
naturals_plus_one = naturals.zip(ones) { |x,y| x + y } # => [2,... ]
naturals_plus_one.take 3                               # => [2, 3, 4]
naturals_plus_one                                      # => [2, 3, 4,... ]
</pre>
An alternative is the <b>build</b> syntax:
<pre>
naturals_plus_one = build { x + y }.where :x => naturals, :y => ones # => [... ]
naturals_plus_one.take 3                                             # => [2, 3, 4]
naturals_plus_one                                                    # => [2, 3, 4,... ]
</pre>
The <b>list</b> syntax with block now supports Haskell-like list comprehensions:
<pre>
odds = list { x }.where(:x => naturals) { x % 2 == 1 }               # => [... ]
evens = naturals.select { |x| x % 2 == 0 }                           # => [... ]
example = list { [ x, y ] }.where(:x => odds, :y => evens) { y < x } # => [... ]
example.take 3                                                       # => [[3, 2], [5, 2], [5, 4]]
example                                                              # => [[3, 2], [5, 2], [5, 4],... ]
</pre>
<p>
With the PI list from examples/pi.rb you can prove some dangerous properties of
PI:
</p>
<pre>
puts "Proof that PI is the number of the beast"
p PI.take(10)

def window(l, n, m = 0)
  list([ l.take(n) * '', m ]) { window(l.drop, n, m + 1) }
end
w = window(PI, 3)
index = w.find { |(x, i)| x == '666' and break i }
puts "Found #{PI.take_span(index, 3)} at #{index}!"
</pre>
outputs
<pre>
Found 666 at 2440!
</pre>
<p>
Oh, noooo!
</p>

<h2>Installation</h2>
<p>
The library can be installed via rubygems:
</p>
<pre>
# gem install lazylist
</pre>
<p>
The gem and the source archive can also be <a
href="http://rubyforge.org/frs/?group_id=394">downloaded</a> directly from rubyforge.org.
</p>

      <h2>Author</h2>
      Florian Frank &lt;<a href="mailto:flori@ping.de">flori@ping.de</a>&gt;

<h2>License</h2>
<p>
This is free software; you can redistribute it and/or modify it under the terms
of the GNU General Public License Version 2 as published by the Free Software
Foundation: <a href="http://www.gnu.org/copyleft/gpl.html">GNU GPL</a>.
</p>

    </div>
    <p class="valid">
      <a href="http://validator.w3.org/check?uri=referer"><img
        src="http://www.w3.org/Icons/valid-xhtml10"
        alt="Valid XHTML 1.0 Transitional" height="31" width="88" /></a>
    </p>
  </body>
</html>

